(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))g(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&g(p)}).observe(document,{childList:!0,subtree:!0});function f(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function g(e){if(e.ep)return;e.ep=!0;const n=f(e);fetch(e.href,n)}})();let x=[],o=null;const a=document.getElementById("niqqud-toggle"),d=document.getElementById("translation-toggle"),i=document.getElementById("dark-toggle"),C=document.getElementById("hebrew-word"),m=document.getElementById("translation-word"),I=document.getElementById("translit-input"),c=document.getElementById("feedback"),s=document.getElementById("check-btn"),y=document.getElementById("length-slider"),w=document.getElementById("length-label"),b=document.getElementById("attempt-count"),L=document.getElementById("correct-count"),S=document.getElementById("correct-percent"),h=document.getElementById("override-btn");let l=parseInt(localStorage.getItem("attemptCount")??"0",10),u=parseInt(localStorage.getItem("correctCount")??"0",10);function k(){b.textContent=l,L.textContent=u;const r=l?Math.round(u/l*100):0;S.textContent=r,localStorage.setItem("attemptCount",l),localStorage.setItem("correctCount",u)}k();a.checked=JSON.parse(localStorage.getItem("showNiqqud")??"true");d.checked=JSON.parse(localStorage.getItem("showTranslation")??"true");i.checked=JSON.parse(localStorage.getItem("darkMode")??"false");document.body.classList.toggle("dark",i.checked);async function v(){const t=await fetch("/Hebrew-Transliteration-Trainer/words.json");if(!t.ok){console.error("failed to load words.json",t.status);return}x=await t.json(),E()}y.addEventListener("input",()=>{w.textContent=y.value});function E(){const r=parseInt(y.value,10),t=x.filter(g=>g.Niqqud_Length<=r);if(!t.length){C.textContent=`No words ≤ length ${r}`,m.textContent="",c.textContent="",s.textContent="Check";return}o=t[Math.floor(Math.random()*t.length)];const f=a.checked;C.textContent=f?o.Niqqud:o.Hebrew,m.textContent="",I.value="",c.textContent="",s.textContent="Check",h.style.display="none"}s.addEventListener("click",()=>{s.textContent==="Check"?(l++,I.value.trim().toLowerCase()===o.Transliteration.toLowerCase()?(u++,c.textContent="✅ Correct!",c.style.color="green"):(c.textContent=`❌ Incorrect. Correct: ${o.Transliteration}`,c.style.color="red",h.style.display="inline-block"),d.checked&&(m.textContent=o.Translation),k(),s.textContent="Next"):E()});h.addEventListener("click",()=>{u++,k(),c.textContent="✅ Marked correct",c.style.color="green",h.style.display="none"});I.addEventListener("keydown",r=>{r.key==="Enter"&&s.click()});a.addEventListener("change",()=>{localStorage.setItem("showNiqqud",a.checked),o&&s.textContent==="Check"&&(C.textContent=a.checked?o.Niqqud:o.Hebrew)});d.addEventListener("change",()=>{localStorage.setItem("showTranslation",d.checked),s.textContent!=="Check"&&o&&(m.textContent=d.checked?o.Translation:"")});i.addEventListener("change",()=>{localStorage.setItem("darkMode",i.checked),document.body.classList.toggle("dark",i.checked)});v();
