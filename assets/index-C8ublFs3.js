(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function h(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(e){if(e.ep)return;e.ep=!0;const n=h(e);fetch(e.href,n)}})();let I=[],o=null;const l=document.getElementById("niqqud-toggle"),d=document.getElementById("translation-toggle"),i=document.getElementById("dark-toggle"),p=document.getElementById("hebrew-word"),m=document.getElementById("translation-word"),y=document.getElementById("translit-input"),s=document.getElementById("feedback"),c=document.getElementById("check-btn"),C=document.getElementById("length-slider"),w=document.getElementById("length-label"),E=document.getElementById("attempt-count"),S=document.getElementById("correct-count"),L=document.getElementById("correct-percent");let a=parseInt(localStorage.getItem("attemptCount")??"0",10),g=parseInt(localStorage.getItem("correctCount")??"0",10);function k(){E.textContent=a,S.textContent=g;const r=a?Math.round(g/a*100):0;L.textContent=r,localStorage.setItem("attemptCount",a),localStorage.setItem("correctCount",g)}k();l.checked=JSON.parse(localStorage.getItem("showNiqqud")??"true");d.checked=JSON.parse(localStorage.getItem("showTranslation")??"true");i.checked=JSON.parse(localStorage.getItem("darkMode")??"false");document.body.classList.toggle("dark",i.checked);async function b(){const t=await fetch("/Hebrew-Transliteration-Trainer/words.json");if(!t.ok){console.error("failed to load words.json",t.status);return}I=await t.json(),x()}C.addEventListener("input",()=>{w.textContent=C.value});function x(){const r=parseInt(C.value,10),t=I.filter(u=>u.Niqqud_Length<=r);if(!t.length){p.textContent=`No words ≤ length ${r}`,m.textContent="",s.textContent="",c.textContent="Check";return}o=t[Math.floor(Math.random()*t.length)];const h=l.checked;p.textContent=h?o.Niqqud:o.Hebrew,m.textContent="",y.value="",s.textContent="",c.textContent="Check"}c.addEventListener("click",()=>{c.textContent==="Check"?(a++,y.value.trim().toLowerCase()===o.Transliteration.toLowerCase()?(g++,s.textContent="✅ Correct!",s.style.color="green"):(s.textContent=`❌ Incorrect. Correct: ${o.Transliteration}`,s.style.color="red"),d.checked&&(m.textContent=o.Translation),k(),c.textContent="Next"):x()});y.addEventListener("keydown",r=>{r.key==="Enter"&&c.click()});l.addEventListener("change",()=>{localStorage.setItem("showNiqqud",l.checked),o&&c.textContent==="Check"&&(p.textContent=l.checked?o.Niqqud:o.Hebrew)});d.addEventListener("change",()=>{localStorage.setItem("showTranslation",d.checked),c.textContent!=="Check"&&o&&(m.textContent=d.checked?o.Translation:"")});i.addEventListener("change",()=>{localStorage.setItem("darkMode",i.checked),document.body.classList.toggle("dark",i.checked)});b();
